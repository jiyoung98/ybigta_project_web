<html lang="en" class="h-100">
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
  <meta name="generator" content="Hugo 0.80.0">
  <title>piCachu:카페 평가 및 추천</title>

  <link rel="canonical" href="https://getbootstrap.com/docs/5.0/examples/cover/">

  <!-- css 파일 -->
  <link rel="stylesheet" href="https://nowonbun.github.io/Loader/loader.css">

  <!-- 출처: https://nowonbun.tistory.com/79 [명월 일지] -->

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
  
  <!-- <link href="/docs/5.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous"> -->

  <!-- chartjs cdn -->

  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>


  <script src="https://code.jquery.com/jquery-latest.min.js"></script>

  <!-- javascript 파일 -->
  <script type="text/javascript" src="https://nowonbun.github.io/Loader/loader.js"></script>

  <script src="https://use.fontawesome.com/releases/v5.2.0/js/all.js"></script>


  <style>


    /* modal */


.container {
  align-items: center;
  /*       background: #F1EEF1;
  border: 1px solid #D2D1D4;
  */      display: flex;
  height: 500px;
  justify-content: center;
  width: 360px;
  opacity: 85%;
}
.email {
  background: rgba( 255, 255, 255, 0 );
  border-radius: 16px;
  height: 32px;
  overflow: hidden;
  position: relative;
  width: 162px;
  -webkit-tap-highlight-color: transparent;
  transition: width 300ms cubic-bezier(0.4, 0.0, 0.2, 1),
    height 300ms cubic-bezier(0.4, 0.0, 0.2, 1),
    box-shadow 300ms cubic-bezier(0.4, 0.0, 0.2, 1),
    border-radius 300ms cubic-bezier(0.4, 0.0, 0.2, 1);
}
.email:not(.expand) {
  cursor: pointer;
}
.email:not(.expand):hover {
  background: rgba( 255, 255, 255, 0 );
}
.from {
  position: absolute;
  transition: opacity 200ms 100ms cubic-bezier(0.0, 0.0, 0.2, 1);
}
.from-contents {
  display: flex;
  flex-direction: row;
  transform-origin: 0 0;
  transition: transform 300ms cubic-bezier(0.4, 0.0, 0.2, 1);
}
.to {
  opacity: 0;
  position: absolute;
  transition: opacity 100ms cubic-bezier(0.4, 0.0, 1, 1);
}
.to-contents {
  transform: scale(.55);
  transform-origin: 0 0;
  transition: transform 300ms cubic-bezier(0.4, 0.0, 0.2, 1);
}
.avatar {
  border-radius: 12px;
  height: 24px;
  left: 6px;
  position: relative;
  top: 4px;
  width: 24px;
}
.name {
  font-size: 14px;
  line-height: 32px;
  margin-left: 10px;
}
.top {
  background: #FEEb40;
  display: flex;
  flex-direction: row;
  height: 70px;
  transition: height 300ms cubic-bezier(0.4, 0.0, 0.2, 1);
  width: 300px;
}
.avatar-large {
  border-radius: 21px;
  height: 42px;
  margin-left: 12px;
  position: relative;
  top: 14px;
  width: 42px;
}
.name-large {
  color: rgb(34, 37, 41);
  font-size: 16px;
  line-height: 70px;
  margin-left: 20px;
}
.x-touch {
  align-items: center;
  align-self: center;
  cursor: pointer;
  display: flex;
  height: 50px;
  justify-content: center;
  margin-left: auto;
  width: 50px;
}
.x {
  background: rgb(34, 37, 41);
  border-radius: 10px;
  height: 20px;
  position: relative;
  width: 20px;
}
.x-touch:hover .x {
  background: rgb(0, 0, 0);
}
.line1 {
  background: #FEEb40;
  height: 12px;
  position: absolute;
  transform: translateX(9px) translateY(4px) rotate(45deg);
  width: 2px;
}
.line2 {
  background: #FEEb40;
  height: 12px;
  position: absolute;
  transform: translateX(9px) translateY(4px) rotate(-45deg);
  width: 2px;
}
.bottom {
  background: #FFF;
  color:  #444247;
  font-size: 14px;
  height: 500px;
  padding-top: 5px;
  width: 300px;
}
.row {
  display: flex;
  flex-direction: row;
  padding-top: 3%;
  padding-bottom: 3%;
  padding-right: 3%;
}
.twitter {
  margin-left: 16px;
  height: 30px;
  position: relative;
  top: 0px;
  width: 30px;
}
.medium {
  height: 30px;
  margin-left: 16px;
  position: relative;
  width: 30px;
}
.link {
  margin-left: 16px;
}
.link a {
  color:  #444247;
  text-decoration: none;
}
.link a:hover {
  color:  #777579;
}
.email.expand {
  border-radius: 6px;
  box-shadow: 0 10px 20px rgba(0,0,0,0.10), 0 6px 6px rgba(0,0,0,0.16);
  height: 500px;
  width: 300px;
}
.expand .from {
  opacity: 0;
  transition: opacity 100ms cubic-bezier(0.4, 0.0, 1, 1);
}
.expand .from-contents {
  transform: scale(1.91);
}
.expand .to {
  opacity: 1;
  transition: opacity 200ms 100ms cubic-bezier(0.0, 0.0, 0.2, 1);
}
.expand .to-contents {
  transform: scale(1);
}




    /*  */

@import url(http://weloveiconfonts.com/api/?family=fontawesome);


*, *:before, *:after {
  box-sizing: border-box;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}


.background {
  font-family: 'Montserrat', sans-serif;
  font-weight: 700;
  letter-spacing: 1.4px;
}


.background button {
  font-family: 'Montserrat', sans-serif;
  font-weight: 700;
  letter-spacing: 1.4px;
}

.background input {
  font-family: 'Montserrat', sans-serif;
  font-weight: 700;
  letter-spacing: 1.4px;
}


/* fontawesome */
[class*="fontawesome-"]:before {
  font-family: 'FontAwesome', sans-serif;
}

.background {
  display: flex;
  min-height: 80vh;
}

.container {
  flex: 0 1 700px;
  margin: auto;
  padding: 10px;
}

.screen {
  position: relative;
  background: #3e3e3e;
  border-radius: 15px;
}

.screen:after {
  content: '';
  display: block;
  position: absolute;
  top: 0;
  left: 20px;
  right: 20px;
  bottom: 0;
  border-radius: 15px;
  box-shadow: 0 20px 40px rgba(0, 0, 0, .4);
  z-index: -1;
}

.screen-header {
  display: flex;
  align-items: center;
  padding: 10px 20px;
  background: #4d4d4f;
  border-top-left-radius: 15px;
  border-top-right-radius: 15px;
}

.screen-header-left {
  margin-right: auto;
}

.screen-header-button {
  display: inline-block;
  width: 8px;
  height: 8px;
  margin-right: 3px;
  border-radius: 8px;
  background: white;
}

.screen-header-button.close {
  background: #ed1c6f;
}

.screen-header-button.maximize {
  background: #e8e925;
}

.screen-header-button.minimize {
  background: #74c54f;
}

.screen-header-right {
  display: flex;
}

.screen-header-ellipsis {
  width: 3px;
  height: 3px;
  margin-left: 2px;
  border-radius: 8px;
  background: #999;
}

.screen-body {
  display: flex;
}

.screen-body-item {
  padding: 50px;
}

.screen-body-item.left {
  display: flex;
  flex-direction: column;
}

.app-title {
  display: flex;
  flex-direction: column;
  position: relative;
  color: #FEEb40;
  font-size: 26px;
}

.app-title:after {
  content: '';
  display: block;
  position: absolute;
  left: 0;
  bottom: -10px;
  width: 25px;
  height: 4px;
  background: #FEEb40;
}

.app-contact {
  margin-top: auto;
  font-size: 8px;
  color: #888;
}

.app-form-group {
  margin-bottom: 15px;
}

.app-form-group.message {
  margin-top: 40px;
}

.app-form-group.buttons {
  margin-bottom: 0;
  text-align: right;
}

.app-form-control {
  width: 330px;
  padding: 10px 0;
  background: none;
  border: none;
  border-bottom: 1px solid #666;
  color: #ddd;
  font-size: 14px;
  text-transform: uppercase;
  outline: none;
  transition: border-color .2s;
}

.app-form-control::placeholder {
  color: #666;
}

.app-form-control:focus {
  border-bottom-color: #ddd;
}

.app-form-button {
  background: none;
  border: none;
  color: #feeb40;
  font-size: 14px;
  cursor: pointer;
  outline: none;
}

.app-form-button:hover {
  color: #ffc400;
}

.credits {
  display: flex;
  justify-content: center;
  align-items: center;
  margin-top: 20px;
  color: #ffa4bd;
  font-family: 'Roboto Condensed', sans-serif;
  font-size: 16px;
  font-weight: normal;
}

.credits-link {
  display: flex;
  align-items: center;
  color: #fff;
  font-weight: bold;
  text-decoration: none;
}

.dribbble {
  width: 20px;
  height: 20px;
  margin: 0 5px;
}

@media screen and (max-width: 520px) {
  .screen-body {
    flex-direction: column;
  }

  .screen-body-item.left {
    margin-bottom: 30px;
  }

  .app-title {
    flex-direction: row;
  }

  .app-title span {
    margin-right: 12px;
  }

  .app-title:after {
    display: none;
  }
}

@media screen and (max-width: 600px) {
  .screen-body {
    padding: 40px;
  }

  .screen-body-item {
    padding: 0;
  }
}



    .bd-placeholder-img {
      font-size: 1.125rem;
      text-anchor: middle;
      -webkit-user-select: none;
      -moz-user-select: none;
      user-select: none;
    }

    @media (min-width: 768px) {
      .bd-placeholder-img-lg {
        font-size: 3.5rem;
      }
    }

    @media (max-width: 768px) {
      .app-form-control {
        width: 100%;
      }
    }

    

    @media (max-width: 575px) {

      .bumper {
        height: 30px !important;
      }


    }


  </style>

  <!-- Custom styles for this template -->
  <!-- <link href="cover.css" rel="stylesheet"> -->
</head>

<body style="background-color: rgb(34, 37, 41); display: grid;">


<header class="mb-auto" style="color: white;">
  <span>
    <div>
    <img src="/static/img/피카츄.png" style="width: 50px; height: auto; float: left;" alt="piCachu">
    <h3 class="float-md-start mb-0" style="height: 50px; line-height: 50px;">
      <a href="{% url 'main:mainpage' %}" style="text-decoration: none; color: white;">piCachu</a>
    </h3>
  </span>
    <nav class="nav nav-masthead justify-content-center float-md-end" style="height: 50px; line-height: 50px;">
      <a class="nav-link active" aria-curresnt="page" href="{% url 'main:mainpage' %}">Home</a>
      <a class="nav-link" href="{% url 'main:write_recommend' %}">리뷰 작성하기</a>
      <a class="nav-link" href="{% url 'main:search' %}">카페 분석 보러가기</a>
    </nav>
</header>
  
<div style="align-items: center;">
  <div class="background" style="margin-right: 0;">
    <div class="container">
      <div class="screen">
        <div class="screen-header">
          <div class="screen-header-left" style="">
            <div class="screen-header-button maximize"></div>
            <div class="screen-header-button minimize"></div>
            <div class="screen-header-button" style="background-color: #b9134f;"></div>
          </div>
          <div class="screen-header-right">
            <div class="screen-header-ellipsis"></div>
            <div class="screen-header-ellipsis"></div>
            <div class="screen-header-ellipsis"></div>
          </div>
        </div>
        <div class="screen-body">
          <div class="screen-body-item left">
            <div class="app-title">
              <span>WRITE</span>
              <span>REVIEW</span>
            </div>
            <div class="app-contact">카페에 대한 리뷰를 남겨보세요!</div>
          </div>
          <div class="screen-body-item">
            <div class="app-form">
              <div class="app-form-group">
                <input class="app-form-control" id="locinput" placeholder="지역" value="">
              </div>
              <div class="app-form-group">
                <input class="app-form-control" id="cafenameinput" placeholder="카페명">
              </div>
              <div class="app-form-group message" style="margin-bottom: 30px;">
                <input class="app-form-control" id="msginput" placeholder="여러분의 솔직한 리뷰🥰">
              </div>
              <div class="app-form-group buttons">
                <button class="app-form-button" id="cancelbtn" onclick="cancel()">CANCEL</button>
                <button class="app-form-button sendbtn" onclick="check()">SEND</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  

</div>

<div class="container" style="z-index: 100; position: absolute; top: 200px; left: 500px;">
  <div class="email" onclick="this.classList.add('expand')" id="email" style="">
    <div class="from">
    </div>
    <div class="to">
      <div class="to-contents">
        <div class="top">
          <div class="name-large">당신을 위한 카페를 추천해 드릴게요!</div>
          <div class="x-touch" onclick="document.querySelector('.email').classList.remove('expand');event.stopPropagation();">
            <div class="x">
              <div class="line1"></div>
              <div class="line2"></div>
            </div>
          </div>
        </div>
        <div class="bottom">
          <div class="row" style="">
            <div class="link">* 입력된 리뷰를 기반으로 키워드 분석,</div>
            <div class="link">감성 분석을 진행하였으며, 분석된 유저의</div>
            <div class="link">카페 선호 유형을 기반으로 동일 지역 5개의</div>
            <div class="link">카페가 추천되었습니다. </div>
          </div>
          <div class="row" style="color: black; font-size: 15px; background-color: rgb(204, 204, 204);">
            <div class="link" id="link1"></div>
            <div class="link" id="link2"></div>
            <div class="link" id="link3"></div>
            <div class="link" id="link4"></div>
            <div class="link" id="link5"></div>
          </div>
          <div class="row">
              <div class="link"><a id="cafe0" href=""></a></div>
              <div class="link"><a id="cafe1" href=""></a></div>
              <div class="link"><a id="cafe2" href=""></a></div>
              <div class="link"><a id="cafe3" href=""></a></div>
              <div class="link"><a id="cafe4" href=""></a></div>
              <div class="link"><a id="cafe5" href=""></a></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<script>
  function cancel () {
    $("#locinput").val("")
    $("#cafenameinput").val("")
    $("#msginput").val("")
  }

</script>

<script>
  $(function(){
  // 로딩 중에는 리로드를 못하게 막는다.(default는 true이다)
  loader.setReload(true);
  // 클래스 스타일 추가
  loader.setStyle("color-4");
  });
  </script>
  


<script>
  function check() {
      cafename = $("#cafenameinput").val()
      locname = $("#locinput").val()
      message = $("#msginput").val()



      {% for cafes in all_cafes %}
        console.log('{{cafes.id}}')
        console.log('{{cafes.name}}')
          if ('{{cafes.name}}' == cafename && '{{cafes.Loc.name}}'==locname) {
            console.log('{{cafes.id}}')
            var cafeid = '{{cafes.id}}' //얘 빼고 추천해 줘야함
          }
      {% endfor %}

      if (cafeid==undefined) {
        alert('해당 지역의 카페 검색 결과가 없습니다. 다시 입력해주세요.')
        $("#cafenameinput").val("");
        $("#cafenameinput").focus();
      } else {
        $(".sendbtn").on("click", function(){

              });
           $.ajax({
               type: "post",
               url: "{% url 'main:ajax' %}",
               data: {"cafeid":cafeid, "message":message, "csrfmiddlewaretoken": "{{ csrf_token }}"},
               success: function(response) {
                   reviewkeyword = response.reviewkeyword;
                   goodorbadresult = response.goodorbadresult;

                   firstcafename = response.firstcafename;
                    secondcafename = response.secondcafename;
                    thirdcafename = response.thirdcafename;
                    fourthcafename = response.fourthcafename;
                    fifthcafename = response.fifthcafename;
                    firstcafeid = response.firstcafeid;
                    secondcafeid = response.secondcafeid;
                    thirdcafeid = response.thirdcafeid;
                    fourthcafeid = response.fourthcafeid;
                    fifthcafeid = response.fifthcafeid;
                   console.log(reviewkeyword);
                   console.log(goodorbadresult);
                   num = goodorbadresult.replace(/[^0-9]/g,'');
                   $("#link1").text("당신의 리뷰 분석 결과😎:")
                   $("#link2").text("리뷰 주요 키워드: "+ reviewkeyword)
                   $("#link3").text("감성 분석: "+ goodorbadresult)

                   console.log(firstcafename)

                   $("#cafe0").text("🍓"+reviewkeyword+" 키워드 추천 카페 리스트🍰")
                   $("#cafe1").text("1. "+firstcafename+" 분석 보러가기")
                   $("#cafe2").text("2. "+secondcafename+" 분석 보러가기")
                   $("#cafe3").text("3. "+thirdcafename+" 분석 보러가기")
                   $("#cafe4").text("4. "+fourthcafename+" 분석 보러가기")
                   $("#cafe5").text("5. "+fifthcafename+" 분석 보러가기")

                   $("#cafe1").attr("href",'http://127.0.0.1:8000/cafedetail/'+firstcafeid+'/')
                   $("#cafe2").attr("href",'http://127.0.0.1:8000/cafedetail/'+secondcafeid+'/')
                   $("#cafe3").attr("href",'http://127.0.0.1:8000/cafedetail/'+thirdcafeid+'/')
                   $("#cafe4").attr("href",'http://127.0.0.1:8000/cafedetail/'+fourthcafeid+'/')
                   $("#cafe5").attr("href",'http://127.0.0.1:8000/cafedetail/'+fifthcafeid+'/')




                   if (num>5000) {
                     console.log(num)
                    $("#link4").text("카페 경험에 만족하셨군요!")
                    $("#link5").text("다시 한 번 "+locname+"지역 "+reviewkeyword+" 키워드 평이 좋은 카페를 추천해 드릴게요🥰")
                   } else {
                    $("#link4").text("카페 경험에 만족하지 못하셨군요ㅠㅠ")
                    $("#link5").text(locname+"지역 "+reviewkeyword+"평이 좋은 카페를 추천해 드릴게요🥺 이번엔 만족하시길!")
                   }
                   $("#email").click();

               },
           })

          
      }
  }
</script>



<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.6.0/dist/umd/popper.min.js" integrity="sha384-KsvD1yqQ1/1+IA7gi3P0tyJcT3vR+NdBTt13hSJ2lnve8agRGXTTyNaBYmCR/Nwi" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.min.js" integrity="sha384-nsg8ua9HAw1y0W1btsyWgBklPnCUAFLuTMS2G72MMONqmOymq585AcH49TLBQObG" crossorigin="anonymous"></script>


</body>
</html>
